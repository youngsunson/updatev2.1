// src/prompts/core.ts

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржк
 */
export type DocType = 'generic' | 'academic' | 'official' | 'marketing' | 'social';

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржк ржХржиржлрж┐ржЧ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕
 */
export interface DocTypeConfig {
  label: string;
  description: string;
  defaultTone: string;
  mainHint: string;
  contentHint: string;
}

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржк ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи
 */
export const DOC_TYPE_CONFIG: { [key in DocType]: DocTypeConfig } = {
  generic: {
    label: 'рж╕рж╛ржзрж╛рж░ржг рж▓рзЗржЦрж╛',
    description: 'ржпрзЗржХрзЛржирзЛ рж╕рж╛ржзрж╛рж░ржг рж▓рзЗржЦрж╛ тАУ ржирж┐рж░ржкрзЗржХрзНрж╖ржнрж╛ржмрзЗ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░ржмрзЗред',
    defaultTone: '',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржмрж╛ржВрж▓рж╛ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред',
    contentHint: 'рж╕рж╛ржзрж╛рж░ржг рж▓рзЗржЦрж╛рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржорзВрж▓ ржмржХрзНрждржмрзНржп ржкрж░рж┐рж╖рзНржХрж╛рж░ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржПржмржВ ржЧржаржиржЧржд ржпрзМржХрзНрждрж┐ржХрждрж╛ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  },
  academic: {
    label: 'ржПржХрж╛ржбрзЗржорж┐ржХ рж▓рзЗржЦрж╛',
    description: 'ржЧржмрзЗрж╖ржгрж╛ ржкрждрзНрж░, ржкрзНрж░ржмржирзНржз, ржерж┐рж╕рж┐рж╕ ржЗрждрзНржпрж╛ржжрж┐ред',
    defaultTone: 'academic',
    mainHint: 'ржПржЯрж┐ ржПржХрж╛ржбрзЗржорж┐ржХ/ржЧржмрзЗрж╖ржгрж╛ржорзВрж▓ржХ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред ржнрж╛рж╖рж╛рж░ рж╢рзБржжрзНржзрждрж╛, ржЯрж╛рж░рзНржорж┐ржирзЛрж▓ржЬрж┐ ржПржмржВ ржЖржирзБрж╖рзНржарж╛ржирж┐ржХрждрж╛ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'ржПржХрж╛ржбрзЗржорж┐ржХ рж▓рзЗржЦрж╛рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржнрзВржорж┐ржХрж╛, ржпрзБржХрзНрждрж┐, ржЙржжрж╛рж╣рж░ржг ржУ ржЙржкрж╕ржВрж╣рж╛рж░ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржПржмржВ рж░рзЗржлрж╛рж░рзЗржирзНрж╕/ржЙрзОрж╕ ржЙрж▓рзНрж▓рзЗржЦ ржЖржЫрзЗ ржХрж┐ ржирж╛ рж▓ржХрзНрж╖рзНржп ржХрж░рзБржиред'
  },
  official: {
    label: 'ржЕржлрж┐рж╢рж┐ржпрж╝рж╛рж▓ ржЪрж┐ржарж┐',
    description: 'ржжрж╛ржкрзНрждрж░рж┐ржХ ржЖржмрзЗржжржи, ржирзЛржЯрж┐рж╢, ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓ ржЗржорзЗржЗрж▓ ржЗрждрзНржпрж╛ржжрж┐ред',
    defaultTone: 'formal',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓/ржжрж╛ржкрзНрждрж░рж┐ржХ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред ржнржжрзНрж░рждрж╛, рж╕ржорзНржорж╛ржирж╕рзВржЪржХ рж╕ржорзНржмрзЛржзржи ржУ рж╕рзНржкрж╖рзНржЯрждрж╛ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'ржЕржлрж┐рж╢рж┐ржпрж╝рж╛рж▓ рж▓рзЗржЦрж╛ржпрж╝ ржкрзНрж░рж╛ржкржХ, ржмрж┐рж╖ржпрж╝, ржЙржжрзНржжрзЗрж╢рзНржп, ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рждржерзНржп ржУ ржмрж┐ржирзАржд ржЙржкрж╕ржВрж╣рж╛рж░ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  },
  marketing: {
    label: 'ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржХржкрж┐',
    description: 'ржмрж┐ржЬрзНржЮрж╛ржкржи, рж╕рзЗрж▓рж╕ ржкрзЗржЬ, ржкрзНрж░ржорзЛрж╢ржирж╛рж▓ рж▓рзЗржЦрж╛ ржЗрждрзНржпрж╛ржжрж┐ред',
    defaultTone: 'persuasive',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ ржорж╛рж░рзНржХрзЗржЯрж┐ржВ/ржкрзНрж░ржорзЛрж╢ржирж╛рж▓ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рж╛ржмрзЗ ржзрж░рзБржиред ржкрзНрж░ржнрж╛ржмрж╢рж╛рж▓рзА, ржЖржХрж░рзНрж╖ржгрзАржпрж╝ ржУ рж╕рзНржкрж╖рзНржЯ ржмрж╛рж░рзНрждрж╛рж░ ржУржкрж░ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржХржиржЯрзЗржирзНржЯрзЗ ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд ржкржгрзНржп/рж╕рзЗржмрж╛, ржПрж░ ржЙржкржХрж╛рж░рж┐рждрж╛, рж╕рзНржкрж╖рзНржЯ ржХрж▓-ржЯрзБ-ржЕрзНржпрж╛ржХрж╢ржи (CTA) ржПржмржВ рж▓ржХрзНрж╖рзНржпржорж╛рждрзНрж░рж╛ ржкрж╛ржаржХрзЗрж░ ржЬржирзНржп ржЙржкржпрзЛржЧрзА ржнрж╛рж╖рж╛ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  },
  social: {
    label: 'рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржкрзЛрж╕рзНржЯ',
    description: 'ржлрзЗрж╕ржмрзБржХ, ржЗржирж╕рзНржЯрж╛ржЧрзНрж░рж╛ржо, ржЯрзБржЗржЯрж╛рж░ ржЗрждрзНржпрж╛ржжрж┐рж░ рж▓рзЗржЦрж╛ред',
    defaultTone: 'informal',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржкрзЛрж╕рзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ, ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг ржУ ржЖржХрж░рзНрж╖ржгрзАржпрж╝ ржнрж╛рж╖рж╛ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржкрзЛрж╕рзНржЯрзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржмрж╛рж░рзНрждрж╛, ржЙржкржпрзБржХрзНржд ржЯрзЛржи, ржЗржЩрзНржЧрзЗржЬржорзЗржирзНржЯ ржмрж╛ржбрж╝рж╛ржирзЛрж░ ржЙржкрж╛ржжрж╛ржи (ржкрзНрж░рж╢рзНржи, CTA, рж╣рзНржпрж╛рж╢ржЯрзНржпрж╛ржЧ ржЗрждрзНржпрж╛ржжрж┐) ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  }
};

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржкрзЗрж░ рж▓рзЗржмрзЗрж▓ ржкрзЗрждрзЗ
 */
export const getDocTypeLabel = (t: DocType): string => DOC_TYPE_CONFIG[t].label;

/**
 * ржорзВрж▓ ржмрж╛ржирж╛ржи ржУ ржмрзНржпрж╛ржХрж░ржг ржкрзНрж░ржорзНржкржЯ рждрзИрж░рж┐
 */
export const buildMainPrompt = (text: string, docType: DocType): string => {
  const docCfg = DOC_TYPE_CONFIG[docType];
  
  return `
ржЖржкржирж┐ ржПржХржЬржи ржжржХрзНрж╖ ржмрж╛ржВрж▓рж╛ ржкрзНрж░рзБржлрж░рж┐ржбрж╛рж░ред

${docCfg.mainHint}

ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржЯрж┐ ржЦрзБржм ржоржирзЛржпрзЛржЧ ржжрж┐ржпрж╝рзЗ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи:

"""${text}"""

тЪая╕П ржХржбрж╝рж╛ ржирж┐рж░рзНржжрзЗрж╢ржирж╛:

рзж. position / index
   - ржпрзЗрж╕ржм ржЕржмржЬрзЗржХрзНржЯрзЗ "position" ржлрж┐рж▓рзНржб ржЖржЫрзЗ, рж╕рзЗржЦрж╛ржирзЗ:
   - "position" = ржПржЗ ржЯрзЗржХрзНрж╕ржЯрзЗрж░ ржнрзЗрждрж░рзЗ ржР рж╢ржмрзНржж/ржмрж╛ржХрзНржпрж╛ржВрж╢рзЗрж░ ржкрзНрж░ржержо рж╢ржмрзНржжрзЗрж░ 0-based word indexред
   - word index ржирж┐рж░рзНржгржпрж╝: ржЯрзЗржХрзНрж╕ржЯржХрзЗ рж╕рзНржкрзЗрж╕, ржирждрзБржи рж▓рж╛ржЗржи ржЗрждрзНржпрж╛ржжрж┐ ржжрж┐ржпрж╝рзЗ ржнрж╛ржЧ ржХрж░рзЗ ржзрж╛рж░рж╛ржмрж╛рж╣рж┐ржХржнрж╛ржмрзЗ ржЧрзБржиржмрзЗржиред

рзз. ржмрж╛ржирж╛ржи ржнрзБрж▓ (spellingErrors)
   - рж╢рзБржзрзБ ржПржХржжржо ржирж┐рж╢рзНржЪрж┐ржд ржнрзБрж▓ ржмрж╛ржирж╛ржи ржзрж░ржмрзЗржи (ржпрзЗржоржи ржпрзБржХрзНрждрж╛ржХрзНрж╖рж░, ржгрждрзНржм-рж╖рждрзНржм, рж╕рзНржкрж╖рзНржЯ ржЯрж╛ржЗржкрзЛ)ред
   - ржирж╛ржо, ржмрзНрж░рзНржпрж╛ржирзНржб, ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржЯрж╛рж░рзНржо, ржЗржВрж░рзЗржЬрж┐ рж╢ржмрзНржжрзЗрж░ ржмрж╛ржирж╛ржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржмрзЗржи ржирж╛ред
   - "wrong" ржлрж┐рж▓рзНржбрзЗ ржЗржиржкрзБржЯрзЗрж░ рж╢ржмрзНржжржЯрж┐ рж╣рзБржмрж╣рзБ ржХржкрж┐ ржХрж░ржмрзЗржиред
   - "suggestions"тАУржП рззтАУрзйржЯрж┐ ржмрж╛рж╕рзНрждржмрж╕ржорзНржоржд рж╕ржарж┐ржХ ржмрж╛ржирж╛ржи ржжрж┐ржиред
   - "position"тАУржП ржнрзБрж▓ рж╢ржмрзНржжрзЗрж░ ржкрзНрж░ржержо рж╢ржмрзНржжрзЗрж░ index ржжрж┐ржи (ржЕржзрж┐ржХрж╛ржВрж╢ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржПржХ рж╢ржмрзНржжржЗ рж╣ржмрзЗ)ред

рзи. ржмрж┐рж░рж╛ржо ржЪрж┐рж╣рзНржи (punctuationIssues)
   - ржПржХржорж╛рждрзНрж░ рждржЦржиржЗ рж╕ржорж╕рзНржпрж╛ ржзрж░ржмрзЗржи ржпржЦржи:
     - ржкрзВрж░рзНржгрж╛ржЩрзНржЧ, рж▓ржорзНржмрж╛ ржмрж╛ржХрзНржпрзЗрж░ рж╢рзЗрж╖рзЗ ржХрзЛржирзЛ ржжрж╛ржБржбрж╝рж┐/ржкрзНрж░рж╢рзНржиржмрзЛржзржХ/ржмрж┐рж╕рзНржоржпрж╝рж╕рзВржЪржХ/ржбрзНржпрж╛рж╢ ржирзЗржЗред
   - рж╢рж┐рж░рзЛржирж╛ржо, рждрж╛рж▓рж┐ржХрж╛, ржХржмрж┐рждрж╛ржпрж╝ ржжрж╛ржБржбрж╝рж┐ ржирж╛ ржерж╛ржХрж▓рзЗржУ рж╕рзЗржЯрж┐ржХрзЗ ржнрзБрж▓ ржзрж░ржмрзЗржи ржирж╛ред
   - "currentSentence" ржлрж┐рж▓рзНржбрзЗ ржЗржиржкрзБржЯ ржмрж╛ржХрзНржп рж╣рзБржмрж╣рзБ ржХржкрж┐ ржХрж░ржмрзЗржиред
   - "correctedSentence" рж╢рзБржзрзБ ржпрждрж┐ржЪрж┐рж╣рзНржи/ржЦрзБржм рж╕рж╛ржорж╛ржирзНржп ржЧржаржи ржарж┐ржХ ржХрж░ржмрзЗ; ржкрзБрж░рзЛ ржмрж╛ржХрзНржп ржирждрзБржи ржХрж░рзЗ рж▓рж┐ржЦржмрзЗржи ржирж╛ред
   - "position"тАУржП ржР ржмрж╛ржХрзНржпрзЗрж░ ржкрзНрж░ржержо рж╢ржмрзНржжрзЗрж░ index ржжрж┐ржиред

рзй. ржнрж╛рж╖рж╛рж░рзАрждрж┐ ржорж┐рж╢рзНрж░ржг (languageStyleMixing)
   - рж╕рж╛ржзрзБ ржУ ржЪрж▓рж┐ржд рж░рзАрждрж┐ ржПржХрж╕рж╛ржерзЗ ржмрзНржпржмрж╣рзГржд рж╣рж▓рзЗ рждржмрзЗржЗ detected = true ржХрж░рзБржиред
   - ржЦрзБржм ржмрзЗрж╢рж┐ ржкрж░рж┐ржмрж░рзНрждржи ржирж╛ ржХрж░рзЗ, ржПржХржЗ ржзрж░ржгрзЗрж░ рж╢ржмрзНржжрзЗ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржЖржирж╛рж░ рж╕рж╛ржЬрзЗрж╢ржи ржжрж┐ржмрзЗржиред
   - "current" ржлрж┐рж▓рзНржбрзЗ ржЗржиржкрзБржЯрзЗрж░ ржЕржВрж╢ рж╣рзБржмрж╣рзБ ржХржкрж┐ ржХрж░ржмрзЗржиред
   - ржкрзНрж░рждрж┐ржЯрж┐ correction ржЕржмржЬрзЗржХрзНржЯрзЗ "position" ржжрж┐ржиред

рзк. рж╢рзНрж░рзБрждрж┐ржоржзрзБрж░рждрж╛ (euphonyImprovements)
   - ржХрзЗржмрж▓ рждржЦржиржЗ рж╕рж╛ржЬрзЗрж╢ржи ржжрзЗржмрзЗржи ржпржЦржи ржХрзЛржирзЛ рж╢ржмрзНржж/ржмрж╛ржХрзНржпрж╛ржВрж╢ рж╕рждрзНржпрж┐ржЗ ржХрж╛ржирзЗ ржмрж┐рж░ржХрзНрждрж┐ржХрж░ ржмрж╛ ржЕрждрж┐рж░рж┐ржХрзНржд ржнрж╛рж░рзА рж╢рзЛржирж╛ржпрж╝ред
   - ржЕрж░рзНржерзЗрж░ ржмржбрж╝ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржмрзЗржи ржирж╛, рж╢рзБржзрзБ рж╕рж╛ржорж╛ржирзНржп рж╢ржмрзНржж ржмрж╛ржЫрж╛ржЗ ржнрж╛рж▓рзЛ ржХрж░ржмрзЗржиред
   - "position"тАУржП ржмрж╛ржХрзНржпрж╛ржВрж╢рзЗрж░ ржкрзНрж░ржержо рж╢ржмрзНржжрзЗрж░ index ржжрж┐ржиред

ЁЯУд ржЖржЙржЯржкрзБржЯ ржлрж░ржорзНржпрж╛ржЯ (ONLY valid JSON, ржХрзЛржирзЛ markdown code block, ржмрзНржпрж╛ржЦрзНржпрж╛ ржмрж╛ ржЕрждрж┐рж░рж┐ржХрзНржд ржЯрзЗржХрзНрж╕ржЯ ржиржпрж╝):

{
  "spellingErrors": [
    {
      "wrong": "ржнрзБрж▓_рж╢ржмрзНржж",
      "suggestions": ["рж╕ржарж┐ржХ рзз", "рж╕ржарж┐ржХ рзи"],
      "position": 0
    }
  ],
  "languageStyleMixing": {
    "detected": true,
    "recommendedStyle": "рж╕рж╛ржзрзБ/ржЪрж▓рж┐ржд",
    "reason": "рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржХрж╛рж░ржг",
    "corrections": [
      {
        "current": "рж╢ржмрзНржж",
        "suggestion": "рж╕ржВрж╢рзЛржзржи",
        "type": "рж╕рж╛ржзрзБтЖТржЪрж▓рж┐ржд",
        "position": 10
      }
    ]
  },
  "punctuationIssues": [
    {
      "issue": "рж╕ржорж╕рзНржпрж╛",
      "currentSentence": "ржЗржиржкрзБржЯ ржмрж╛ржХрзНржп",
      "correctedSentence": "рж╕ржВрж╢рзЛржзрж┐ржд ржмрж╛ржХрзНржп",
      "explanation": "ржмрзНржпрж╛ржЦрзНржпрж╛",
      "position": 50
    }
  ],
  "euphonyImprovements": [
    {
      "current": "рж╢ржмрзНржж/ржмрж╛ржХрзНржпрж╛ржВрж╢",
      "suggestions": ["ржмрж┐ржХрж▓рзНржк"],
      "reason": "ржХрзЗржи ржПржЯрж┐ ржнрж╛рж▓рзЛ",
      "position": 120
    }
  ]
}
`;
};
