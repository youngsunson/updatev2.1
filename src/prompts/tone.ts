/* -------------------------------------------------------------------------- */
/*                        TONE PROMPT BUILDER                                 */
/* -------------------------------------------------------------------------- */

const toneInstructions: Record<string, string> = {
  'formal': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **ржЖржирзБрж╖рзНржарж╛ржирж┐ржХ (Formal)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: ржЖржкржирж┐/ржЖржкржирж╛рж░ ржмрзНржпржмрж╣рж╛рж░, ржХрзНрж░рж┐ржпрж╝рж╛ржкржжрзЗ 'ржХрж░рзБржи/ржмрж▓рзБржи', ржкрзВрж░рзНржг ржмрж╛ржХрзНржп ржЧржаржиред`,
  'informal': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **ржЕржирж╛ржирзБрж╖рзНржарж╛ржирж┐ржХ (Informal)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: рждрзБржорж┐/рждрзБржЗ ржмрзНржпржмрж╣рж╛рж░, ржХржерзНржп ржнрж╛рж╖рж╛, рж╕рж╣ржЬ рж╢ржмрзНржжред`,
  'professional': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **ржкрзЗрж╢рж╛ржжрж╛рж░ (Professional)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: рж╕рзНржкрж╖рзНржЯрждрж╛, ржЖрждрзНржоржмрж┐рж╢рзНржмрж╛рж╕рзА ржнрж╛рж╖рж╛, ржкрзЗрж╢рж╛ржжрж╛рж░ рж╢ржмрзНржжржнрж╛ржгрзНржбрж╛рж░ред`,
  'friendly': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг (Friendly)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: ржЙрж╖рзНржг рж╕ржорзНржмрзЛржзржи, ржЖржмрзЗржЧржкрзВрж░рзНржг рж╢ржмрзНржж, ржЗрждрж┐ржмрж╛ржЪржХ ржнрж╛рж╖рж╛ред`,
  'respectful': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **рж╕ржорзНржорж╛ржиржЬржиржХ (Respectful)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: рж╕ржорзНржорж╛ржирж╕рзВржЪржХ рж╕ржорзНржмрзЛржзржи, ржмрж┐ржирзАржд ржЕржирзБрж░рзЛржз, рж╢рзНрж░ржжрзНржзрж╛рж╕рзВржЪржХ рж╢ржмрзНржжред`,
  'persuasive': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **ржкрзНрж░ржнрж╛ржмрж╢рж╛рж▓рзА (Persuasive)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА рж╢ржмрзНржж, ржЬрж░рзБрж░рж┐рждрж╛ рждрзИрж░рж┐, ржЗрждрж┐ржмрж╛ржЪржХ ржлрж▓рж╛ржлрж▓ред`,
  'neutral': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **ржирж┐рж░ржкрзЗржХрзНрж╖ (Neutral)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: ржмрж╕рзНрждрзБржирж┐рж╖рзНржа ржнрж╛рж╖рж╛, ржЖржмрзЗржЧржорзБржХрзНржд рж╢ржмрзНржж, рж╕рзВрждрзНрж░ ржЙрж▓рзНрж▓рзЗржЦред`,
  'academic': `ржЖржкржирж┐ ржПржХржЬржи ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮред ржирж┐ржЪрзЗрж░ ржЯрзЗржХрзНрж╕ржЯржХрзЗ **рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ (Academic)** ржЯрзЛржирзЗ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: ржкрж░рж┐ржнрж╛рж╖рж╛ ржмрзНржпржмрж╣рж╛рж░, рждрзГрждрзАржпрж╝ ржкрзБрж░рзБрж╖, ржЬржЯрж┐рж▓ ржмрж╛ржХрзНржпред`
};

export const buildTonePrompt = (text: string, tone: string): string => {
  return `${toneInstructions[tone]}

ЁЯУЭ **ржмрж┐рж╢рзНрж▓рзЗрж╖ржгрзЗрж░ ржЬржирзНржп ржЯрзЗржХрзНрж╕ржЯ:**
"""${text}"""

ЁЯУЛ **ржЖржкржирж╛рж░ ржХрж╛ржЬ:**
1. ржЯрзЗржХрзНрж╕ржЯрзЗрж░ ржкрзНрж░рждрж┐ржЯрж┐ рж╢ржмрзНржж ржУ ржмрж╛ржХрзНржпрж╛ржВрж╢ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржиред
2. ржХрж╛ржЩрзНржХрзНрж╖рж┐ржд ржЯрзЛржирзЗ ржирзЗржЗ ржПржоржи рж╢ржмрзНржжржЧрзБрж▓рзЛ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзБржиред
3. "position" ржлрж┐рж▓рзНржбрзЗ рж╕рзЗржЗ рж╢ржмрзНржжрзЗрж░ 0-based word index ржжрж┐ржи; ржЗржиржкрзБржЯ ржЯрзЗржХрзНрж╕ржЯржХрзЗ рж╕рзНржкрзЗрж╕/ржирждрзБржи рж▓рж╛ржЗржирзЗ ржнрж╛ржЧ ржХрж░рзЗ ржзрж╛рж░рж╛ржмрж╛рж╣рж┐ржХржнрж╛ржмрзЗ ржЧрзБржиржмрзЗржиред
4. **ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг:** "current" ржлрж┐рж▓рзНржбрзЗ рж╢ржмрзНржжржЯрж┐ рж╣рзБржмрж╣рзБ ржЗржиржкрзБржЯ ржЯрзЗржХрзНрж╕ржЯ ржерзЗржХрзЗ ржХржкрж┐ ржХрж░ржмрзЗржи (ржХрзЛржирзЛ ржкрж░рж┐ржмрж░рзНрждржи ржЫрж╛ржбрж╝рж╛)ред

ЁЯУд Response Format (ONLY valid JSON, no markdown, no extra text):
{
  "toneConversions": [
    {
      "current": "ржмрж░рзНрждржорж╛ржи рж╢ржмрзНржж (рж╣рзБржмрж╣рзБ ржЯрзЗржХрзНрж╕ржЯ ржерзЗржХрзЗ)",
      "suggestion": "рж╕ржВрж╢рзЛржзрж┐ржд рж░рзВржк",
      "reason": "ржХрж╛рж░ржг",
      "position": 0
    }
  ]
}

ржпржжрж┐ ржХрзЛржирзЛ ржкрж░рж┐ржмрж░рзНрждржи ржкрзНрж░ржпрж╝рзЛржЬржи ржирж╛ рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ "toneConversions": [] ржЦрж╛рж▓рж┐ array рж░рж╛ржЦржмрзЗржиред`;
};

export const getToneName = (tone: string): string => {
  const map: Record<string, string> = {
    'formal': 'ЁЯУЛ ржЖржирзБрж╖рзНржарж╛ржирж┐ржХ',
    'informal': 'ЁЯТм ржЕржирж╛ржирзБрж╖рзНржарж╛ржирж┐ржХ',
    'professional': 'ЁЯТ╝ ржкрзЗрж╢рж╛ржжрж╛рж░',
    'friendly': 'ЁЯШК ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг',
    'respectful': 'ЁЯЩП рж╕ржорзНржорж╛ржиржЬржиржХ',
    'persuasive': 'ЁЯТк ржкрзНрж░ржнрж╛ржмрж╢рж╛рж▓рзА',
    'neutral': 'тЪЦя╕П ржирж┐рж░ржкрзЗржХрзНрж╖',
    'academic': 'ЁЯУЪ рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ'
  };
  return map[tone] || tone;
};

export const TONE_OPTIONS = [
  { id: '', icon: 'тЭМ', title: 'ржХрзЛржиржЯрж┐ ржиржпрж╝', desc: 'рж╢рзБржзрзБ ржмрж╛ржирж╛ржи ржУ ржмрзНржпрж╛ржХрж░ржг ржкрж░рзАржХрзНрж╖рж╛' },
  { id: 'formal', icon: 'ЁЯУЛ', title: 'ржЖржирзБрж╖рзНржарж╛ржирж┐ржХ (Formal)', desc: 'ржжрж╛ржкрзНрждрж░рж┐ржХ ржЪрж┐ржарж┐, ржЖржмрзЗржжржи, ржкрзНрж░рждрж┐ржмрзЗржжржи' },
  { id: 'informal', icon: 'ЁЯТм', title: 'ржЕржирж╛ржирзБрж╖рзНржарж╛ржирж┐ржХ (Informal)', desc: 'ржмрзНржпржХрзНрждрж┐ржЧржд ржЪрж┐ржарж┐, ржмрзНрж▓ржЧ, рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛' },
  { id: 'professional', icon: 'ЁЯТ╝', title: 'ржкрзЗрж╢рж╛ржжрж╛рж░ (Professional)', desc: 'ржмрзНржпржмрж╕рж╛ржпрж╝рж┐ржХ ржпрзЛржЧрж╛ржпрзЛржЧ, ржХрж░рзНржкрзЛрж░рзЗржЯ' },
  { id: 'friendly', icon: 'ЁЯШК', title: 'ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг (Friendly)', desc: 'ржЙрж╖рзНржг, ржЖржирзНрждрж░рж┐ржХ ржпрзЛржЧрж╛ржпрзЛржЧ' },
  { id: 'respectful', icon: 'ЁЯЩП', title: 'рж╕ржорзНржорж╛ржиржЬржиржХ (Respectful)', desc: 'ржмржпрж╝рзЛржЬрзНржпрзЗрж╖рзНржа ржмрж╛ рж╕ржорзНржорж╛ржирж┐ржд ржмрзНржпржХрзНрждрж┐' },
  { id: 'persuasive', icon: 'ЁЯТк', title: 'ржкрзНрж░ржнрж╛ржмрж╢рж╛рж▓рзА (Persuasive)', desc: 'ржорж╛рж░рзНржХрзЗржЯрж┐ржВ, ржмрж┐ржХрзНрж░ржпрж╝, ржкрзНрж░ржЪрж╛рж░ржгрж╛' },
  { id: 'neutral', icon: 'тЪЦя╕П', title: 'ржирж┐рж░ржкрзЗржХрзНрж╖ (Neutral)', desc: 'рж╕ржВржмрж╛ржж, рждржерзНржпржорзВрж▓ржХ рж▓рзЗржЦрж╛' },
  { id: 'academic', icon: 'ЁЯУЪ', title: 'рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ (Academic)', desc: 'ржЧржмрзЗрж╖я┐╜я┐╜я┐╜рж╛ ржкрждрзНрж░, ржкрзНрж░ржмржирзНржз' }
];